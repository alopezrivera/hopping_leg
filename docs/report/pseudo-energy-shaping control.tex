\section{Pseudo energy shaping control}

\begin{equation}
    J = \begin{pmatrix}
    -L_1 \sin{q_1} - L_2 \sin{(q_1+q_2)} & -L_2 \sin{(q1+q2)} \\
    L_1 \cos{q_1} + L_2 \cos{(q_1+q_2)} & L_2 \cos{(q1+q2)}
    \end{pmatrix}
\end{equation}
 \begin{equation}
     u = J^T \begin{pmatrix}
     m (\ddot q_0 - g) \\
     0
     \end{pmatrix}
 \end{equation}
 
 \begin{equation}
     J^{-1} = \begin{pmatrix}
     \frac{\cos (q_1+q_2)}{L_1 \sin q_2} & \frac{\cos (q_1+q_2)}{L_1 \sin q_2} \\
     \frac{-L_1\cos q_1 + L_2 \cos (q1+q2)}{L_1 L_2 \sin q_2} & \frac{-L_1\sin q_1 + L_2 \sin (q1+q2)}{L_1 L_2 \sin q_2}
     \end{pmatrix}
 \end{equation}

% \begin{equation}
%     \ddot q_0 = \frac{L_{2} \tau_{1} \cos{\left(q_{1} + q_{2} \right)} + \tau_{2} \left(- L_{1} \cos{\left(q_{1} \right)} - L_{2} \cos{\left(q_{1} + q_{2} \right)}\right)}{L_{1} L_{2} m \sin{\left(q_{2} \right)}}
% \end{equation}

For a desired jumping height $h_{des}$, the desired energy $E_{des}$ is according to \autoref{energy}:
\begin{equation}
    E_{des} = m\, g\, h_{des}
\end{equation}

\newpage
\section{Equations}

The kinetic energy $T$ of a system is defined by:
\begin{equation}
    T = \frac{1}{2} \dot q^T M \dot q, 
\end{equation}
while the potential energy $V$ equals to:
\begin{equation}
    V = \sum_{i=1}^{n} m_i\, g \,h_i
\end{equation}.

For the hopping leg with the symmetric mass matrix

% \begin{equation}
%     M = \left[\begin{matrix}m_{0} + m_{1} \sin^{2}{\left(q_{1} \right)} + m_{1} \cos^{2}{\left(q_{1} \right)} + m_{2} \sin^{2}{\left(q_{1} + q_{2} \right)} + m_{2} \cos^{2}{\left(q_{1} + q_{2} \right)} & - L_{1} m_{2} \sin{\left(q_{2} \right)} \cos{\left(q_{1} + q_{2} \right)} + L_{1} m_{2} \sin{\left(q_{1} + q_{2} \right)} \cos{\left(q_{2} \right)} + cx_{1} m_{1} \sin{\left(q_{1} \right)} + cx_{2} m_{2} \sin{\left(q_{1} + q_{2} \right)} + cy_{2} m_{1} \cos{\left(q_{1} \right)} + cy_{2} m_{2} \cos{\left(q_{1} + q_{2} \right)} & cx_{2} m_{2} \sin{\left(q_{1} + q_{2} \right)} + cy_{2} m_{2} \cos{\left(q_{1} + q_{2} \right)}\\L_{1} m_{2} \sin{\left(q_{1} \right)} + cx_{1} m_{1} \sin{\left(q_{1} \right)} + cx_{2} m_{2} \sin{\left(q_{1} + q_{2} \right)} + cy_{2} m_{1} \cos{\left(q_{1} \right)} + cy_{2} m_{2} \cos{\left(q_{1} + q_{2} \right)} & Izz_{1} + Izz_{2} + L_{1} cx_{2} m_{2} \cos{\left(q_{2} \right)} - L_{1} cy_{2} m_{2} \sin{\left(q_{2} \right)} + L_{1} \left(L_{1} m_{2} \sin{\left(q_{2} \right)} - cy_{2} m_{2}\right) \sin{\left(q_{2} \right)} + L_{1} \left(L_{1} m_{2} \cos{\left(q_{2} \right)} + cx_{2} m_{2}\right) \cos{\left(q_{2} \right)} & Izz_{2} + L_{1} cx_{2} m_{2} \cos{\left(q_{2} \right)} - L_{1} cy_{2} m_{2} \sin{\left(q_{2} \right)}\\m_{2} \left(cx_{2} \sin{\left(q_{1} + q_{2} \right)} + cy_{2} \cos{\left(q_{1} + q_{2} \right)}\right) & Izz_{2} + L_{1} cx_{2} m_{2} \cos{\left(q_{2} \right)} - L_{1} cy_{2} m_{2} \sin{\left(q_{2} \right)} & Izz_{2}\end{matrix}\right]
% \end{equation}

\begin{equation}
    \begin{aligned}
    M_{1,1} =& m_{0} + m_{1} \sin^{2}{\left(q_{1} \right)} + m_{1} \cos^{2}{\left(q_{1} \right)} + m_{2} \sin^{2}{\left(q_{1} + q_{2} \right)} + m_{2} \cos^{2}{\left(q_{1} + q_{2} \right)}\\
    M_{1,2} =& L_{1} m_{2} \sin{\left(q_{1} \right)} + cx_{1} m_{1} \sin{\left(q_{1} \right)} + cx_{2} m_{2} \sin{\left(q_{1} + q_{2} \right)} + cy_{2} m_{1} \cos{\left(q_{1} \right)} + cy_{2} m_{2} \cos{\left(q_{1} + q_{2} \right)}\\
    M_{1,3} =& cx_{2} m_{2} \sin{\left(q_{1} + q_{2} \right)} + cy_{2} m_{2} \cos{\left(q_{1} + q_{2} \right)}\\
    % M_{2,1} =& L_{1} m_{2} \sin{\left(q_{1} \right)} + cx_{1} m_{1} \sin{\left(q_{1} \right)} + cx_{2} m_{2} \sin{\left(q_{1} + q_{2} \right)} + cy_{2} m_{1} \cos{\left(q_{1} \right)} + cy_{2} m_{2} \cos{\left(q_{1} + q_{2} \right)}\\
    M_{2,2} =& Izz_{1} + Izz_{2} + L_{1} cx_{2} m_{2} \cos{\left(q_{2} \right)} - L_{1} cy_{2} m_{2} \sin{\left(q_{2} \right)} \\&+ L_{1} \left(L_{1} m_{2} \sin{\left(q_{2} \right)} - cy_{2} m_{2}\right) \sin{\left(q_{2} \right)} + L_{1} \left(L_{1} m_{2} \cos{\left(q_{2} \right)} + cx_{2} m_{2}\right) \cos{\left(q_{2} \right)}\\
    M_{2,3} =& Izz_{2} + L_{1} cx_{2} m_{2} \cos{\left(q_{2} \right)} - L_{1} cy_{2} m_{2} \sin{\left(q_{2} \right)}\\
    % M_{3,1} =& m_{2} \left(cx_{2} \sin{\left(q_{1} + q_{2} \right)} + cy_{2} \cos{\left(q_{1} + q_{2} \right)}\right)\\
    % M_{3,2} =& Izz_{2} + L_{1} cx_{2} m_{2} \cos{\left(q_{2} \right)} - L_{1} cy_{2} m_{2} \sin{\left(q_{2} \right)}\\
    M_{3,3} =& Izz_{2}\\
    \end{aligned}
\end{equation}
we are getting the kinetic energy
\begin{equation}
        T = \frac{Izz_{1} dq_{1}^{2}}{2} + \frac{Izz_{2} dq_{1}^{2}}{2} + Izz_{2} dq_{1} dq_{2} + \frac{Izz_{2} dq_{2}^{2}}{2} + \frac{L_{1}^{2} dq_{1}^{2} m_{2}}{2} + L_{1} cx_{2} dq_{1}^{2} m_{2} \cos{\left(q_{2} \right)} + L_{1} cx_{2} dq_{1} dq_{2} m_{2} \cos{\left(q_{2} \right)} - L_{1} cy_{2} dq_{1}^{2} m_{2} \sin{\left(q_{2} \right)} - L_{1} cy_{2} dq_{1} dq_{2} m_{2} \sin{\left(q_{2} \right)} + L_{1} dq_{0} dq_{1} m_{2} \sin{\left(q_{1} \right)} + cx_{1} dq_{0} dq_{1} m_{1} \sin{\left(q_{1} \right)} + cx_{2} dq_{0} dq_{1} m_{2} \sin{\left(q_{1} + q_{2} \right)} + cx_{2} dq_{0} dq_{2} m_{2} \sin{\left(q_{1} + q_{2} \right)} + cy_{2} dq_{0} dq_{1} m_{1} \cos{\left(q_{1} \right)} + cy_{2} dq_{0} dq_{1} m_{2} \cos{\left(q_{1} + q_{2} \right)} + cy_{2} dq_{0} dq_{2} m_{2} \cos{\left(q_{1} + q_{2} \right)} + \frac{dq_{0}^{2} m_{0}}{2} + \frac{dq_{0}^{2} m_{1}}{2} + \frac{dq_{0}^{2} m_{2}}{2}
\end{equation}
and the potential energy
\begin{equation}
\begin{aligned}
    V_0 =& g m_{0} q_{0}\\
    V_1 =& - g m_{1} \left(cx_{1} \cos{\left(q_{1} \right)} - cy_{2} \sin{\left(q_{1} \right)} - q_{0}\right)\\
    V_2 =& - g m_{2} \left(L_{1} \cos{\left(q_{1} \right)} + cx_{2} \cos{\left(q_{1} + q_{2} \right)} - cy_{2} \sin{\left(q_{1} + q_{2} \right)} - q_{0}\right)\\
    \end{aligned}
\end{equation}
\begin{equation}
    V = g \left(m_{0} q_{0} + m_{1} \left(- cx_{1} \cos{\left(q_{1} \right)} + cy_{2} \sin{\left(q_{1} \right)} + q_{0}\right) - m_{2} \left(L_{1} \cos{\left(q_{1} \right)} + cx_{2} \cos{\left(q_{1} + q_{2} \right)} - cy_{2} \sin{\left(q_{1} + q_{2} \right)} - q_{0}\right)\right)
\end{equation}